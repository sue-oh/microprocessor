COLGREEN	EQU	0FFC5H
COLRED		EQU	0FFC6H
ROW		EQU	0FF7H

	ORG	8000H
	MOV	R1,#00H
	MOV	R2,#00H
	MOV	R0,#00H

MAIN:	MOV	R2,#00000001B
	MOV	R0,#00000001B
	CALL	DOTCOLR

DDOWN:	MOV	R0,#00000011B	

	CALL	DOTCOLG
	CALL	DELAY

	MOV	A,R0
	RLC	A
	MOV	R0,A

	JC	DRIGHT
	JMP	DDOWN

DRIGHT:	MOV	R1,#00000011B
	
	CALL	DOTCOLG
	CALL	DELAY

	MOV	A,R1
	RLC	A ;rotate left with carry
	MOV	R1,A

	JC	DUP
	JMP	DRIGHT

DUP:	MOV	A,R0
	RRC	A ;rotate right with carry
	MOV	R0,A
	
	JC	DLEFT

DLEFT:	MOV	A,R1
	RLC	A ;rotate left with carry
	MOV	R1,A

	JC	MAIN
	

DOTCOLG:
	MOV	DPTR,#COLGREEN
	MOV	A,R1
	MOVX	@DPTR,A
	
	MOV	DPTR,#ROW
	MOV	A,R0
	MOVX	@DPTR,A
	RET ;return from subroutine

DOTCOLR:
	MOV	DPTR,#COLRED
	MOV	A,R2
	MOVX	@DPTR,A
	
	MOV	DPTR,#ROW
	MOV	A,R0
	MOVX	@DPTR,A
	RET ;return from subroutine

DELAY:	MOV	R7,#02H
DELAY1:	MOV	R6,#0FFH
DELAY2:	MOV	R5,#0FFH
DELAY3:	DJNZ	R5,DELAY3
	DJNZ	R6,DELAY2
	DJNZ	R7,DELAY1

RET
END
